# OQQWall 示例配置文件
# 复制此文件为 config.yaml 并根据实际情况修改

# 系统配置
system:
  debug: false
  log_level: INFO
  data_dir: ./data
  cache_dir: ./data/cache
  
# 服务器配置  
server:
  host: "0.0.0.0"
  port: 8082
  workers: 4
  
# 数据库配置
database:
  type: sqlite
  url: sqlite+aiosqlite:///./data/oqqwall.db
  pool_size: 10
  
# Redis配置（可选，用于缓存和消息队列）
redis:
  enabled: false
  host: localhost
  port: 6379
  db: 0
  
# LLM配置
llm:
  provider: dashscope  # dashscope/openai
  api_key: sk-your-api-key-here  # 替换为实际的API密钥
  text_model: qwen-plus-latest
  vision_model: qwen-vl-max-latest
  timeout: 30
  max_retry: 3
  
# 处理配置
processing:
  wait_time: 120  # 等待用户补充消息的时间（秒）
  max_concurrent: 10  # 最大并发处理数
  
# 接收器配置
receivers:
  qq:
    enabled: true
    auto_accept_friend: true
    friend_request_window: 300
    access_token: ""
    
# 发送器配置  
publishers:
  qzone:
    enabled: true
    max_attempts: 3
    batch_size: 30
    max_images_per_post: 9
    send_schedule: []  # ["09:00", "12:00", "18:00", "21:00"]
    # 发布控制
    publish_text: true            # 是否发布文本（编号/@/评论/链接等）
    include_publish_id: true      # 是否包含发布编号
    include_at_sender: true       # 是否@投稿者
    image_source: both            # 图片来源：rendered|chat|both
    include_segments: false       # 是否包含聊天分段文本（false 不发聊天记录）
  bilibili:
    enabled: false
    max_attempts: 3
    batch_size: 30
    max_images_per_post: 9
    send_schedule: []
    publish_text: true
    include_publish_id: true
    include_at_sender: false
    image_source: rendered
    include_segments: false
    # 可选：直接指定各账号的 cookie 文件位置（如未指定则默认 data/cookies/bilibili_{account_id}.json）
    accounts: {}
  rednote:
    enabled: false
    max_attempts: 3
    batch_size: 20
    max_images_per_post: 9
    send_schedule: []
    publish_text: true
    include_publish_id: false
    include_at_sender: false
    image_source: rendered
    include_segments: false
    accounts: {}
    headless: true
    slow_mo_ms: 0
    user_agent: ""
    
# 审核配置
audit:
  auto_approve: false
  ai_safety_check: true
  sensitive_words: []
  
# 账号组配置
account_groups:
  # 示例组（需要根据实际情况修改）
  default:
    name: "默认组"
    manage_group_id: "123456789"  # 管理群ID
    main_account:
      qq_id: "1234567890"  # 主账号QQ
      http_port: 3000  # NapCat HTTP端口（若使用 NapCat/QSign 等，需要仍保留）
      http_token: ""   # Napcat HTTP Token（若启用HTTP鉴权则填写）
    minor_accounts: []  # 副账号列表
    # - qq_id: "9876543210"
    #   http_port: 3001
    #   http_token: ""
    max_post_stack: 1
    max_images_per_post: 30
    send_schedule: []
    watermark_text: ""
    wall_mark: "OQQWall"  # 渲染页底部显示的墙标识（如 学校墙/社团墙）
    friend_add_message: "你好，欢迎投稿"
    quick_replies:
      "格式": "投稿格式：直接发送文字+图片即可"
      "时间": "我们会在每天9:00、12:00、18:00、21:00发送投稿"
    # 是否允许匿名评论（所有人使用 #评论 指令时，系统不暴露其身份到外部平台；
    # 仅在内部审核日志中可见可选的操作者ID）
    allow_anonymous_comment: true
